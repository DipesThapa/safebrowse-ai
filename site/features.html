<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Safeguard – Features & Architecture</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="logo">
        <img src="../assets/icons/icon128.png" alt="Safeguard logo">
        <div>
          <span class="pill">Product details</span>
          <h1>Safeguard (SafeBrowse AI)</h1>
          <p>Every feature, how it works under the hood, and the tech stack that powers the extension.</p>
        </div>
      </div>
      <nav>
        <a href="index.html">Home</a>
        <a href="#features">Features</a>
        <a href="#flow">How it works</a>
        <a href="#stack">Tech stack</a>
        <a href="privacy.html">Privacy</a>
        <a href="support.html">Support</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="section" id="features">
      <div class="card">
        <h2 class="section__title">Features at a glance</h2>
        <p class="section__subtitle">Everything shipped in the popup, background service worker, and content protections.</p>
        <div class="card-list card-list--two">
          <div class="card-item">
            <h3>Network & policy</h3>
            <ul>
              <li>Master protection toggle with badge status.</li>
              <li>DeclarativeNetRequest blocklist (packaged + user) with allowlist overrides.</li>
              <li>Per-site allow toggle from the popup.</li>
              <li>SafeSearch enforcement on Google/Bing queries.</li>
              <li>Custom blocklist import/export (CSV/txt/JSON).</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>Focus Mode (Kid Homework Mode)</h3>
            <ul>
              <li>One-click session toggle with 30/45/60 min (and 2 min test) durations.</li>
              <li>Blocks social, gaming, and streaming domains; allows edu defaults and allowlist.</li>
              <li>Countdown badge, persistent timer across tabs/windows, optional PIN to end early.</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>Visual safeguards</h3>
            <ul>
              <li>Aggressive mode: blur and pause risky images/videos on-page.</li>
              <li>Heuristic image scan (skin-tone density, red/dark/edge patterns) — on-device only.</li>
              <li>Optional local TF.js NSFW model hook (disabled by default unless bundled).</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>Override security</h3>
            <ul>
              <li>PIN protection for overrides/allowlist edits with local-only hashing.</li>
              <li>Override log with reasons, timestamps, optional approver name prompt.</li>
              <li>Webhook alerts for overrides and tamper/heartbeat gaps (Slack/Teams friendly).</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>Profiles & metrics</h3>
            <ul>
              <li>Age/role-based profiles that set sensitivity, allow/block lists, and aggressive mode.</li>
              <li>Metrics for allowlist size and policy blocks shown in the popup.</li>
              <li>Weekly safeguarding digest export (CSV) for audits/reviews.</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>Parents & admins</h3>
            <ul>
              <li>Parent/admin mode panel to manage profiles, allow/block lists, alerts, digests.</li>
              <li>PIN reminders and protected toggles to prevent accidental disablement.</li>
              <li>Guided tour to introduce key controls on first run.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="flow">
      <div class="card">
        <h2 class="section__title">How it works</h2>
        <p class="section__subtitle">From network rules to on-page masking, everything stays on-device.</p>
        <ol class="steps">
          <li><strong>Rules applied via DNR:</strong> The background service worker rebuilds <code>declarativeNetRequest</code> rules from packaged blocklists, user blocklists, allowlists, and Focus Mode categories.</li>
          <li><strong>SafeSearch enforcement:</strong> Search params are rewritten to enforce SafeSearch on supported engines.</li>
          <li><strong>Heuristic page scan:</strong> The content script evaluates URL, metadata, body text, and sampled images; high-risk scores trigger an interstitial or blur.</li>
          <li><strong>Focus Mode overlay:</strong> While active, social/gaming/streaming hosts are blocked; edu allowlist and .edu/.org pass through; the badge shows remaining minutes.</li>
          <li><strong>Overrides & PIN:</strong> Attempts to bypass blocks prompt for a local-only PIN; reasons are logged and can be exported. Approver prompt and webhook alerts are optional.</li>
          <li><strong>Parents/Admins:</strong> The popup’s parent mode gates sensitive settings and summarizes status (alerts, logs, profiles, tamper alerts).</li>
        </ol>
        <p class="section__subtitle">Privacy: no browsing data, images, or telemetry are sent to servers. All policy data lives in <code>chrome.storage</code> (sync/local) on the device.</p>
      </div>
    </section>

    <section class="section" id="stack">
      <div class="card">
        <h2 class="section__title">Technology stack</h2>
        <div class="card-list card-list--two">
          <div class="card-item">
            <h3>Chrome Extension (MV3)</h3>
            <ul>
              <li>Manifest V3 with <code>declarativeNetRequest</code>, <code>storage</code>, <code>tabs</code>, <code>alarms</code>.</li>
              <li>Service worker: rule rebuilds, badge updates, Focus Mode timers, heartbeats, webhook calls.</li>
              <li>Popup: vanilla HTML/CSS/JS (no frameworks) with parent/admin panels and guided tour.</li>
              <li>Content script: heuristic scanning, interstitial UI, media masking, SafeSearch enforcement.</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>AI & heuristics</h3>
            <ul>
              <li>On-device heuristics for text/URL + lightweight image sampling (skin/red/dark/edge patterns).</li>
              <li>Optional TF.js NSFW model (local bundle only, disabled by default to avoid CSP/network).</li>
              <li>No remote inference; all scoring happens in the browser.</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>Build & tooling</h3>
            <ul>
              <li>Linting: ESLint (ES modules) for <code>src/</code> and root <code>content.js</code>.</li>
              <li>Packaging: <code>npm run zip:webstore</code> builds the Web Store-ready zip.</li>
              <li>Data: packaged blocklist + presets under <code>/data</code>; optional phishing feed support.</li>
            </ul>
          </div>
          <div class="card-item">
            <h3>Privacy & storage</h3>
            <ul>
              <li>Settings in <code>chrome.storage.sync</code> (allowlist, toggles, profiles).</li>
              <li>Sensitive items (PIN hash/salt, override logs) in <code>chrome.storage.local</code>.</li>
              <li>No analytics, telemetry, or remote calls except user-configured webhooks.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <div>© <span id="year"></span> Safeguard (SafeBrowse AI). All rights reserved.</div>
      <div>
        <a href="privacy.html">Privacy</a> ·
        <a href="support.html">Support</a> ·
        <a href="https://github.com/DipesThapa/safebrowse-ai" target="_blank" rel="noopener">GitHub</a>
      </div>
    </div>
  </footer>

  <script src="assets/site.js"></script>
</body>
</html>
